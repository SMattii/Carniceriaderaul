<!-- Author : Noé TATOUD -->
<!doctype html>
<html lang="en">
  <head>
    <%- include('../../../imports.ejs') %>
    <link rel="stylesheet" type="text/css" href="/css/infos.css" />
    <link rel="stylesheet" type="text/css" href="/css/actionbar.css" />
  </head>
  <body>
    <header><%- include('./layout/layout.ejs') %></header>
    <main>
      <%- include('../orderNav.ejs') %>
      <div class="progress-bar d-flex flex-row">
        <span class="billing current bi bi-check">
          Dirección de facturación
        </span>
        <span class="contact pending bi bi-chevron-right"> Contacto </span>
        <span class="recovery pending bi bi-chevron-right"> Recogida </span>
      </div>

      <form
        class="d-flex flex-column align-items-center"
        action="/order/infos"
        method="POST"
      >
        <div class="form-step billing">
          <div class="form">
            <h2>Dirección de facturación</h2>
            <div class="row">
              <div class="form-group col-md-5">
                <label for="field3">Ciudad</label>
                <input
                  class="form-control"
                  type="text"
                  id="field3"
                  name="field3"
                />
              </div>
              <div class="form-group col-md-3">
                <label for="field4">Código postal</label>
                <input
                  class="form-control"
                  type="text"
                  id="field4"
                  name="field4"
                />
              </div>
              <div class="form-group col-md-4">
                <label for="field1">País</label>
                <input
                  class="form-control"
                  type="text"
                  id="field1"
                  name="field1"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="field5">Dirección 1</label>
              <input
                class="form-control"
                type="text"
                id="field5"
                name="field5"
              />
            </div>
          </div>
          <span class="form-nav">
            <b>1/3</b>
            <button
              type="button"
              class="button button-secondary next"
              onclick="changeView('billing', 'contact', 'next')"
            >
              Contacto ->
            </button>
          </span>
        </div>

        <div class="form-step contact" style="display: none">
          <div class="form">
            <h2>Contacto</h2>
            <div class="form-group">
              <label for="phone">Teléfono</label>
              <input class="form-control" type="tel" id="phone" name="phone" />
            </div>
            <div class="form-group">
              <label for="email">Correo Electrónico</label>
              <input
                class="form-control"
                type="email"
                id="email"
                name="email"
              />
            </div>
          </div>

          <span class="form-nav">
            <button
              type="button"
              class="button button-secondary prev"
              onclick="changeView('contact', 'billing', 'back')"
            >
              <- Dirección de facturación
            </button>
            <b>2/3</b>
            <button
              type="button"
              class="button button-secondary next"
              onclick="changeView('contact', 'recovery', 'next')"
            >
              Recogida ->
            </button>
          </span>
        </div>

        <div class="form-step recovery" style="display: none">
          <div class="form">
            <h2>Recogida</h2>
            <div class="form-group row">
              <div class="form-group col-md-4">
                <label for="day">Fecha de recogida</label>
                <input class="form-control" type="date" id="day" name="day" />
              </div>
              <div class="form-group col-md-4">
                <label for="time">Hora</label>
                <input
                  class="form-control"
                  type="time"
                  id="time"
                  name="time"
                  value="DD/MM/YYYY"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="comment">Comentarios</label>
              <textarea
                class="form-control form-text-area"
                id="comment"
                name="comment"
              ></textarea
              ><br />
            </div>
          </div>

          <span class="form-nav">
            <button
              type="button"
              class="button button-secondary prev"
              onclick="changeView('recovery', 'contact', 'back')"
            >
              <- Contacto
            </button>
            <b>3/3</b></span
          >
        </div>
        <%- include('./layout/actionbar.ejs', {leftButtonTitle: "<- Carrito", rightButtonTitle:"Confirmar compra ✓"}) %>
       
      </form>

      <script>
        const changeView = (fromView, toView, direction) => {
          const progressBarPrevious = $(`.progress-bar .${fromView}`);
          const progressBarCurrent = $(`.progress-bar .${toView}`);
          progressBarPrevious.removeClass("current");
          progressBarCurrent.addClass("current");
          if (direction === "next") {
            progressBarPrevious.addClass("completed");
          } else {
            progressBarCurrent.removeClass("completed");
          }
          if (toView === "recovery") {
            $('button[type="submit"]').show();
          } else {
            $('button[type="submit"]').hide();
          }
          $(`.form-step.${fromView}`).hide();
          $(`.form-step.${toView}`).show();
        };

        $('button[type="submit"]').hide();
      </script>
    </main>
  </body>
</html>
